(function(e){function t(t){for(var r,i,o=t[0],u=t[1],c=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,o=1;o<a.length;o++){var u=a[o];0!==n[u]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"034f":function(e,t,a){"use strict";a("85ec")},5932:function(e,t,a){"use strict";a("b649")},"85ec":function(e,t,a){},b649:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],i=a("d4ec"),o=a("262e"),u=a("2caf"),c=a("9ab4"),l=a("60a3"),d=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),t.apply(this,arguments)}return a}(l["c"]);d=c["a"]([Object(l["a"])({components:{}})],d);var p=d,h=p,f=(a("034f"),a("2877")),m=Object(f["a"])(h,n,s,!1,null,null,null),v=m.exports,y=a("8c4f"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("div",{staticClass:"header"},[a("el-card",{staticClass:"statistic"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"Найбрудніші"}},[e._v("Пізніше тут буде топ найзабрудненіших станцій")]),a("el-tab-pane",{attrs:{label:"Найчистіші"}},[e._v("Пізніше тут буде топ найчистіших станцій")])],1)],1),a("el-card",{staticClass:"choose"},[a("div",{staticClass:"required"},[a("div",{staticClass:"station"},[a("label",[e._v("Оберіть станцію ")]),a("v-select",{attrs:{disabled:this.loadingState.isStationLoading,loading:this.loadingState.isStationLoading,options:e.stationDisplayList,label:"displayName",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"spinner",fn:function(t){var r=t.loading;return[r?a("div",{staticClass:"vs__spinner",staticStyle:{"border-left-color":"rgba(88,151,251,0.71)"}}):e._e()]}}]),model:{value:e.selectedStation,callback:function(t){e.selectedStation=t},expression:"selectedStation"}})],1),a("div",{staticClass:"date"},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"Початок","end-placeholder":"Кінець","picker-options":e.pickerOptions,clearable:!1},model:{value:e.dateChoose,callback:function(t){e.dateChoose=t},expression:"dateChoose"}})],1)]),a("el-button",{staticClass:"refresh-button",attrs:{type:"primary"},on:{click:e.refresh}},[e._v(" Оновити ")])],1)],1),a("el-card",[e.loadingState.isDataLoading?a("div",e._l(Array.from(e.loadingState.measuresDownloadProgress),(function(e,t){return a("el-progress",{key:t,attrs:{percentage:Math.floor(e[1].current/e[1].total*100)}})})),1):a("charts",{staticClass:"display-data",attrs:{measures:e.measures}})],1)],1)},b=[],x=(a("99af"),a("4160"),a("4e82"),a("0d03"),a("4ec9"),a("d3b7"),a("820e"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("4795"),a("2909")),w=(a("96cf"),a("1da1")),O=a("bee2"),k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"charts"},e._l(6,(function(t){return a("highcharts",{key:t,attrs:{constructorType:"stockChart",options:e.chartOptions[t-1]}})})),1)},j=[],S=a("4452"),D=a.n(S),C=a("ea7f"),P=a.n(C),T=new r["default"],L=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.dataTime=new Date,e.chartOptions=[{title:{text:"PM 2.5/PM 10"},yAxis:[{title:{text:"PM 2.5"}},{title:{text:"PM 10"}}],xAxis:{type:"datetime"},series:[{turboThreshold:5e3,yAxis:0,name:"PM2.5",data:[],color:"#FF530D"},{turboThreshold:5e3,yAxis:1,name:"PM10",data:[]}]},{title:{text:"PM 2.5"},yAxis:[{title:{text:"PM2.5"}}],xAxis:{type:"datetime"},series:[{turboThreshold:5e3,yAxis:0,name:"PM2.5",data:[]}]},{title:{text:"PM 10"},yAxis:[{title:{text:"PM10"}}],xAxis:{type:"datetime"},series:[{turboThreshold:5e3,yAxis:0,name:"PM10",data:[],color:"#FF530D"}]},{title:{text:"Температура"},yAxis:[{title:{text:"Температура Celsium"}}],xAxis:{type:"datetime"},series:[{turboThreshold:5e3,yAxis:0,name:"Температура Celsium",data:[],color:"#BA55D3"}]},{title:{text:"Вологість"},yAxis:[{title:{text:"Вологість"}}],xAxis:{type:"datetime"},series:[{turboThreshold:5e3,yAxis:0,name:"Вологість",data:[],color:"#4682B4"}]},{title:{text:"Тиск (гПа)"},yAxis:[{title:{text:"Тиск (гПа)"}}],xAxis:{type:"datetime"},series:[{turboThreshold:5e3,yAxis:0,name:"Тиск (гПа)",data:[],color:"#FF7F50"}]}],e}return Object(O["a"])(a,[{key:"created",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:T.$on("extremes-changed",(function(e){P.a.charts.forEach((function(t){t&&t.index!==e.chartId&&t.xAxis[0].setExtremes(e.min,e.max)}))})),T.$on("refresh",(function(){console.log(t.measures),t.chartOptions[0].series[0].data=t.measures.pm25,t.chartOptions[0].series[1].data=t.measures.pm10,t.chartOptions[1].series[0].data=t.measures.pm25,t.chartOptions[2].series[0].data=t.measures.pm10,t.chartOptions[3].series[0].data=t.measures.temperature,t.chartOptions[4].series[0].data=t.measures.humidity,t.chartOptions[5].series[0].data=t.measures.pressure}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(l["c"]);c["a"]([Object(l["b"])()],L.prototype,"measures",void 0),L=c["a"]([Object(l["a"])({components:{highcharts:S["Chart"]}})],L);var M=L,_=M,A=Object(f["a"])(_,k,j,!1,null,null,null),R=A.exports;function F(e){var t=new Date;return t.setDate(t.getDate()-e),t}a("25f0");var $=a("bc3a"),N=a.n($),E=function(){function e(){var t=this;Object(i["a"])(this,e),this.User={},this.IsLogged=!1,this._axiosClient=N.a.create({baseURL:"https://33bo49db5l.execute-api.eu-central-1.amazonaws.com"}),this._axiosClient.interceptors.response.use((function(e){return t.ok(e)}),(function(e){}))}return Object(O["a"])(e,[{key:"get",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._axiosClient.get(t,a));case 1:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"post",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,a,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._axiosClient.post(t,a,r));case 1:case"end":return e.stop()}}),e,this)})));function t(t,a,r){return e.apply(this,arguments)}return t}()},{key:"ok",value:function(e){return e}}]),e}(),I=new E;function q(e){var t=new Date(e),a=""+(t.getMonth()+1),r=""+t.getDate(),n=t.getFullYear(),s=t.getHours().toString(),i=t.getMinutes().toString(),o=t.getSeconds().toString();return a.length<2&&(a="0"+a),r.length<2&&(r="0"+r),s.length<2&&(s="0"+s),i.length<2&&(i="0"+i),o.length<2&&(o="0"+o),"".concat(n,"-").concat(a,"-").concat(r,"T").concat(s,":").concat(i,":").concat(o,"Z")}var U=function(){function e(){Object(i["a"])(this,e),this.repoAxios=I}return Object(O["a"])(e,[{key:"getData",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,a,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.repoAxios.get("/Measurement",{params:{From:q(a),To:q(r),LocationId:t}}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,a,r){return e.apply(this,arguments)}return t}()},{key:"getSpecificData",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,a,r,n,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.repoAxios.get("/Measurement/Type",{params:{From:q(a),To:q(r),LocationId:t,PollutantType:n},onDownloadProgress:s}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,a,r,n,s){return e.apply(this,arguments)}return t}()},{key:"getLocations",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.repoAxios.get("/Location/List"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function z(e,t){console.log(e);var a=new Date,r=new Date;r.setTime(r.getTime()-t),e.$emit("pick",[r,a])}var B=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.totalMeasurementCount=6,e.loadingState={isStationLoading:!1,isDataLoading:!1,measuresDownloadProgress:new Map},e.pickerOptions={shortcuts:[{text:"Остання неділя",onClick:function(e){z(e,6048e5)}},{text:"Останній місяць",onClick:function(e){z(e,2592e6)}},{text:"Останні 3 місяці",onClick:function(e){z(e,7776e6)}}]},e.measures={id:"",city:"",stationName:"",localName:"",timezone:null,lat:0,lon:0,pm25:[],pm10:[],temperature:[],humidity:[],pressure:[],qualityIndex:[]},e.selectedStation=null,e.dateChoose=[F(2),new Date],e.stationList=[],e.stationDisplayList=[],e.dataService=new U,e}return Object(O["a"])(a,[{key:"created",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingState.isStationLoading=!0,e.next=3,this.dataService.getLocations().then(function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.stationList=a.data.sort((function(e,t){return e.city>t.city?1:e.city<t.city?-1:0})),t.stationDisplayList=[],t.stationList.forEach((function(e){t.stationDisplayList.push({id:e.id,displayName:"".concat(e.city," - ").concat(e.stationName)})})),t.loadingState.isStationLoading=!1;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"refresh",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==this.selectedStation){e.next=3;break}return this.$notify.error({title:"Виберіть станцію",message:"Перед оновленням данних потрібно вибрати станцію"}),e.abrupt("return");case 3:return t=this.selectedStation.split("_")[1],e.next=6,this.loadData(t,this.dateChoose[0],this.dateChoose[1]);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"generateLoadTasks",value:function(e,t,a){for(var r=[],n=0;n<this.totalMeasurementCount;n++)r.push(this.dataService.getSpecificData(e,t,a,n,this.onMeasureDownloadProgress(n))),this.loadingState.measuresDownloadProgress.set(n,{current:0,total:100});return r}},{key:"onMeasureDownloadProgress",value:function(e){var t=this;return function(a){t.loadingState.measuresDownloadProgress.set(e,{total:a.total,current:a.loaded}),t.$forceUpdate()}}},{key:"loadData",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,a,r){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadingState.isDataLoading=!0,this.loadingState.measuresDownloadProgress=new Map,Promise.allSettled(Object(x["a"])(this.generateLoadTasks(t,a,r))).then((function(e){e.forEach((function(e){"fulfilled"==e.status&&200===e.value.status&&(n.measures.id=e.value.data.id,n.measures.city=e.value.data.city,n.measures.stationName=e.value.data.stationName,n.measures.localName=e.value.data.localName,n.measures.pm10=2===e.value.data.pollutantType?e.value.data.data:n.measures.pm10,n.measures.pm25=3===e.value.data.pollutantType?e.value.data.data:n.measures.pm25,n.measures.temperature=5===e.value.data.pollutantType?e.value.data.data:n.measures.temperature,n.measures.humidity=1===e.value.data.pollutantType?e.value.data.data:n.measures.humidity,n.measures.pressure=4===e.value.data.pollutantType?e.value.data.data:n.measures.pressure,n.measures.qualityIndex=0===e.value.data.pollutantType?e.value.data.data:n.measures.qualityIndex)})),n.loadingState.isDataLoading=!1,setTimeout((function(){T.$emit("refresh")}),0)}));case 3:case"end":return e.stop()}}),e,this)})));function t(t,a,r){return e.apply(this,arguments)}return t}()}]),a}(l["c"]);B=c["a"]([Object(l["a"])({components:{Charts:R}})],B);var J=B,H=J,Y=(a("5932"),Object(f["a"])(H,g,b,!1,null,"b8e428ee",null)),Z=Y.exports;r["default"].use(y["a"]);var G=[{path:"/",name:"home",component:Z}],K=new y["a"]({mode:"history",base:"/",routes:G}),Q=K,V=a("2f62");r["default"].use(V["a"]);var W=new V["a"].Store({state:{},mutations:{},actions:{},modules:{}});a("4de4");function X(e){if(e){var t={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",weekday:"long"};return new Date(e).toLocaleDateString(void 0,t)}}function ee(e){e.filter("formatDate",X)}var te=a("37d8"),ae=a.n(te),re=(a("0fae"),a("6039")),ne=a.n(re),se=(a("6dfc"),a("5c96")),ie=a.n(se),oe=a("4a7a"),ue=a.n(oe);r["default"].component("v-select",ue.a),r["default"].use(ie.a,{locale:ne.a}),ae()(P.a),r["default"].use(D.a),r["default"].config.productionTip=!1,ee(r["default"]),new r["default"]({router:Q,store:W,render:function(e){return e(v)}}).$mount("#app")}});
//# sourceMappingURL=app.7152829c.js.map